{{/*
    This partial displays related posts.
    It uses Hugo's related content feature to show relevant articles.
*/}}
{{- $page := . -}}
{{ if not $page.Site.Params.relatedPosts.disable -}}
  {{- $related := $page.Site.RegularPages.Related $page | first $page.Site.Params.relatedPosts.Limit -}}
  {{- $relatedPosts := where $related "Type" $page.Site.Params.relatedPosts.type -}}
  {{- with $posts := $relatedPosts }}
    <div class="related-posts">
      <h2>{{ i18n "related_posts" }}</h2>
      <ul class="listing">
        {{- range $post := $posts }}
          <li>
            <a class="title" href="{{ $post.RelPermalink }}" title="{{ $post.Title }}">{{ $post.Title }}</a>
          </li>
        {{- end }}
      </ul>
    </div>
  {{- end -}}
{{- end }}