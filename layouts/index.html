{{/*
    This file is the specific template for the homepage of the website.
    It defines the "content" block, which is injected into the baseof.html layout.
    It iterates over the site's regular pages (blog posts), handling pagination, and
    displays a summary of each post.
*/}}
{{ define "content" }}
  {{- $page := . -}}
  {{ "<!-- starting of index.html -->" | safeHTML }}
  {{- $paginator := $page.Paginate (where $page.Site.RegularPages "Type" $page.Site.Params.BlogType) }}
  {{- range $index, $post := $paginator.Pages }}
    {{- if not $post.Params.hiddenFromHomePage }}
      <article class="post">
        <header>
          <h1 class="post-title">
            <a href="{{ $post.Permalink }}" title="{{ $post.Title }}">{{ $post.Title }}</a>
          </h1>
        </header>
        {{ partial "post-meta.html" . }}
        <div class="post-content">
          {{ $post.Summary }}{{ if $post.Truncated }}……{{ end }}
        </div>
        {{- if or $post.Truncated $post.Params.Summary }}
          <p class="readmore">
            <a href="{{ $post.Permalink }}">{{ i18n "continueReading" }}</a>
          </p>
        {{- end }}
      </article>
    {{ end }}
  {{- end }}
  {{ partial "paginator" $page }}
  {{ "<!-- ending of index.html -->" | safeHTML }}
{{ end }}
